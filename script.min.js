const quantity_minus=document.getElementById("minus"),quantity_plus=document.getElementById("plus"),quantity_text=document.getElementById("quantity-text"),carousel=document.getElementById("carousel"),carousel_items=document.querySelectorAll(".carousel-item"),carousel_prev=document.getElementById("prev"),carousel_next=document.getElementById("next"),addToCart=document.getElementById("add-to-cart"),modal=document.getElementById("modal"),modal_close=document.getElementById("modal-close"),alert=document.getElementById("alert"),alert_close=document.getElementById("alert-close"),alert_text=document.getElementById("alert-text"),pay=document.getElementById("pay"),deleveryInfo=document.getElementById("delevery-info"),paypalMessage=document.getElementById("paypal-message"),infoName=document.getElementById("name"),infoLastName=document.getElementById("last-name"),infoEmail=document.getElementById("email"),infoStreet=document.getElementById("street"),infoColony=document.getElementById("colony"),infoReference=document.getElementById("reference"),infoCity=document.getElementById("city"),infoState=document.getElementById("state-select"),infoZip=document.getElementById("zip");let quantity=1;quantity_minus.addEventListener("click",()=>{quantity>1&&(quantity--,quantity_text.innerHTML=quantity)}),quantity_plus.addEventListener("click",()=>{quantity<50&&(quantity++,quantity_text.innerHTML=quantity)});let carousel_index=0;function validateZip(e){return!/^[0-9]{5}$/.test(e)}function validateEmail(e){return/\S+@\S+\.\S+/.test(e)}function renderPay(){document.getElementById("pay-container").innerHTML="",paypal.Buttons({style:{shape:"pill",color:"blue",layout:"vertical",label:"pay"},createOrder:function(e,a){return a.order.create({purchase_units:[{amount:{value:64.99*quantity}}]})},onApprove:function(e,a){return a.order.capture().then(function(e){"COMPLETED"===e.status&&sendOrderEmail(e.id,e.payer.name.given_name?e.payer.name.given_name:infoName.value)})},onCancel:function(e){showAlert("Lamentamos que no hayas podido completar la compra")},onError:function(e){showAlert("Ha ocurrido un error inesperado")}}).render("#pay-container")}function showAlert(e){alert_text.innerHTML=e,alert.classList.contains("active")||alert.classList.add("active")}function sendOrderEmail(e,a){Email.send({Host:"smtp.elasticemail.com",Username:"hello@ruanmiga.social",Password:"EFC0A11928E8ED327F2197FC1D570209921F",To:"antoniomirabal59@gmail.com",From:"Ruanmiga New Order <hello@ruanmiga.social>",Subject:"New order from "+infoName.value,Body:"Nombres: "+infoName.value+"<br>Apellidos: "+infoLastName.value+"<br>Email: "+infoEmail.value+"<br>Calle y Numero: "+infoStreet.value+"<br>Colonia: "+infoColony.value+"<br>Referencia: "+infoReference.value+"<br>Ciudad: "+infoCity.value+"<br>Estado: "+infoState.value+"<br>Codigo Postal: "+infoZip.value+"<br>Cantidad: "+quantity+"<br>Order Id: "+e+"<br>"}).then(t=>{"OK"===t?sendConsumerEmail(e,a):console.error(t)})}function sendConsumerEmail(e,a){Email.send({Host:"smtp.elasticemail.com",Username:"hello@ruanmiga.social",Password:"EFC0A11928E8ED327F2197FC1D570209921F",To:infoEmail.value,From:"Ruanmiga - Mig Switch <hello@ruanmiga.social>",Subject:"Tu compra de Mig Switch ha sido exitosa",Body:a+" Tu compra de "+quantity+" Unidades de Mig Switch ha sido exitosa, estamos a la espera de recibir las copias de mig Switch de los desarrolladores detras del proyecto para empezar a distribuirlas y tu seras uno de los primeros en tener tu Mig Switch en tus manos.<br /><br />Estamos tan ansiosos como tu. en cuanto recibamos las copias y te las enviemos te lo haremos saber enviandote un correo electronico.<br /><small>Por favor estar al pendiente de tu correo electronico.</small>"}).then(e=>{"ok"===e.toLowerCase()?(console.log("Email sent to "+infoEmail.value),showAlert("Gracias "+a+" por tu compra de "+quantity+" unidades de Mig Switch en cuanto empezemos a distribuir te avisaremos por correo cuando tu paquete este en camino. <br /><small>Por favor estar al pendiente de tu correo electronico es posible que tu servicio de correo lo marque como spam.</small>")):console.error(e)})}carousel_items[carousel_index].classList.add("active"),carousel_prev.addEventListener("click",()=>{carousel_items[carousel_index].classList.remove("active"),--carousel_index<0&&(carousel_index=carousel_items.length-1),carousel_items[carousel_index].classList.add("active")}),carousel_next.addEventListener("click",()=>{carousel_items[carousel_index].classList.remove("active"),++carousel_index>=carousel_items.length&&(carousel_index=0),carousel_items[carousel_index].classList.add("active")}),addToCart.addEventListener("click",()=>{modal.classList.contains("active")||modal.classList.add("active")}),modal_close.addEventListener("click",()=>{modal.classList.contains("active")&&modal.classList.remove("active")}),pay.addEventListener("click",()=>{if(modal.classList.contains("active")||modal.classList.add("active"),""!==infoName.value&&""!==infoLastName.value&&""!==infoStreet.value&&""!==infoColony.value&&""!==infoReference.value&&""!==infoCity.value&&""!==infoState.value){if(!validateEmail(infoEmail.value)){showAlert("El correo electronico no es valido");return}if(validateZip(infoZip.value)){showAlert("El codigo postal no es valido");return}renderPay()}}),alert_close.addEventListener("click",()=>{alert.classList.contains("active")&&alert.classList.remove("active")});